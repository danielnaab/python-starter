---
title: {{ project_name }} - Agent Entrypoint
status: working
---

# Agent Entrypoint - {{ project_name }}

You are working on **{{ project_name }}**: {{ project_description }}

## Before Making Changes

1. **Read project configuration**: [../knowledge-base.yaml](../knowledge-base.yaml)
2. **Follow meta-KB policies**: [../.graft/meta-knowledge-base/AGENTS.md](../.graft/meta-knowledge-base/AGENTS.md)
3. **Understand template patterns**: [../python-starter/docs/agents.md](../python-starter/docs/agents.md)

## Core Pattern

Services are **pure functions** taking `ServiceContext` (frozen dataclass):

```python
def my_service(ctx: ServiceContext, param: str) -> Result:
    entity = ctx.repository.get(param)
    return process(entity)
```

Interfaces use `typing.Protocol` — no inheritance required. Tests use **fakes**, not mocks.

## File Organization

```
src/{{ package_name }}/
├── domain/          # Pure domain logic (entities, value objects)
├── services/        # Service functions (business logic)
├── adapters/        # External system implementations
├── protocols/       # Protocol interface definitions
└── cli/             # CLI commands and wiring
```

## Common Tasks

**Add service**: Define in `services/`, accept `ServiceContext` first, add unit test with fake context, wire to CLI if needed.

**Add adapter**: Define protocol in `protocols/`, implement in `adapters/`, add to `ServiceContext`, create fake in `tests/fakes/`.

**Run tests**: `uv run pytest` | **Lint**: `uv run ruff check .` | **Format**: `uv run ruff format .`

## Authority

**Canonical**: `src/`, `pyproject.toml`, `tests/` | **Interpretive**: `docs/`

When code and docs conflict, **code is correct**.

## Template Resources

- [Architecture](../python-starter/docs/architecture/architecture.md) — patterns and design
- [Decisions](../python-starter/docs/decisions/) — ADRs for tool and pattern choices
- [Guides](../python-starter/docs/guides/) — getting started and development
- [Agent reference](../python-starter/docs/agents.md) — template agent entrypoint

## Sources

- [Project KB](../knowledge-base.yaml) — project configuration
- [Template KB](../python-starter/docs/knowledge-base.yaml) — template configuration
- [Meta KB](../.graft/meta-knowledge-base/AGENTS.md) — KB methodology
