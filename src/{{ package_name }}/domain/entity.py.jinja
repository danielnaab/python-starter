{% if include_example_code -%}
"""Entity — domain object with identity.

Entities are distinguished by their ID rather than attributes.
Two entities with the same ID are the same entity, even if attributes differ.
"""

from dataclasses import dataclass, field
from uuid import uuid4

from {{ package_name }}.domain.errors import ValidationError


@dataclass(frozen=True)
class EntityName:
    """Value object for entity names.

    Immutable value with validation.

    Attributes:
        text: The name text (non-empty, max 100 chars)
    """

    text: str

    def __post_init__(self) -> None:
        """Validate name after initialization.

        Raises:
            ValidationError: If name is invalid
        """
        if not self.text:
            raise ValidationError("Name cannot be empty")
        if len(self.text) > 100:
            raise ValidationError(f"Name too long: {len(self.text)} chars (max 100)")
        if not self.text.strip():
            raise ValidationError("Name cannot be only whitespace")

    def __str__(self) -> str:
        """String representation is the text value.

        Returns:
            The name text
        """
        return self.text


@dataclass(frozen=True)
class EntityValue:
    """Value object for entity values.

    Immutable value with validation.

    Attributes:
        amount: The numeric value (must be non-negative)
    """

    amount: int

    def __post_init__(self) -> None:
        """Validate value after initialization.

        Raises:
            ValidationError: If value is invalid
        """
        if self.amount < 0:
            raise ValidationError(f"Value cannot be negative: {self.amount}")

    def __str__(self) -> str:
        """String representation is the amount.

        Returns:
            String representation of amount
        """
        return str(self.amount)

    def __int__(self) -> int:
        """Integer conversion returns the amount.

        Returns:
            The numeric amount
        """
        return self.amount

    def increment(self, delta: int) -> "EntityValue":
        """Create new value object with incremented amount.

        Value objects are immutable, so this returns a new instance.

        Args:
            delta: Amount to add (can be negative)

        Returns:
            New EntityValue with updated amount

        Raises:
            ValidationError: If result would be negative
        """
        new_amount = self.amount + delta
        return EntityValue(amount=new_amount)


@dataclass
class Entity:
    """Example entity demonstrating domain modeling patterns.

    Remove or customize this for your domain.

    Key characteristics:
    - Has identity (id field)
    - Mutable (not frozen)
    - Contains business logic
    - Value objects for validated data

    Attributes:
        name: Entity name (value object)
        value: Entity value (value object)
        id: Unique identifier
    """

    name: EntityName
    value: EntityValue
    id: str = field(default_factory=lambda: str(uuid4()))

    def __post_init__(self) -> None:
        """Validate entity after initialization."""
        if not self.id:
            raise ValueError("Entity ID cannot be empty")

    def update_value(self, new_value: EntityValue) -> None:
        """Update entity value.

        Business logic example: value can only increase.

        Args:
            new_value: New value to set

        Raises:
            ValueError: If new value is less than current value
        """
        if new_value.amount < self.value.amount:
            raise ValueError(
                f"Value can only increase (current: {self.value.amount}, "
                f"attempted: {new_value.amount})"
            )
        self.value = new_value

    def rename(self, new_name: EntityName) -> None:
        """Rename entity.

        Args:
            new_name: New name to set
        """
        self.name = new_name

    def __eq__(self, other: object) -> bool:
        """Entities are equal if they have the same ID.

        Args:
            other: Object to compare

        Returns:
            True if same entity (same ID)
        """
        if not isinstance(other, Entity):
            return NotImplemented
        return self.id == other.id

    def __hash__(self) -> int:
        """Hash based on ID for set/dict usage.

        Returns:
            Hash of entity ID
        """
        return hash(self.id)

    def __repr__(self) -> str:
        """Developer-friendly representation.

        Returns:
            String representation showing key attributes
        """
        return (
            f"Entity(id={self.id!r}, name={self.name.text!r}, "
            f"value={self.value.amount})"
        )
{% else -%}
"""Entity — domain object with identity.

Add your domain entities here. Entities have identity (ID) and are distinguished
by that ID rather than their attributes.

Example:
    from dataclasses import dataclass, field
    from uuid import uuid4

    @dataclass
    class User:
        email: str
        name: str
        id: str = field(default_factory=lambda: str(uuid4()))

        def __eq__(self, other: object) -> bool:
            if not isinstance(other, User):
                return NotImplemented
            return self.id == other.id
"""
{% endif -%}
