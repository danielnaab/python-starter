{% if include_example_code -%}
"""Example service functions demonstrating functional service pattern.

Service functions are pure functions taking ServiceContext as first parameter.
Replace or customize these for your domain.
"""

from {{ package_name }}.domain.entity import Entity, EntityName, EntityValue
from {{ package_name }}.domain.errors import EntityNotFoundError
from {{ package_name }}.services.context import ServiceContext


def create_example(
    ctx: ServiceContext,
    name: str,
    value: int,
) -> Entity:
    """Create and persist a new entity.

    Args:
        ctx: Service context with dependencies
        name: Entity name (will be wrapped in EntityName value object)
        value: Entity value (will be wrapped in EntityValue value object)

    Returns:
        Created entity

    Raises:
        ValidationError: If name or value are invalid

    Example:
        >>> ctx = get_context()
        >>> entity = create_example(ctx, "Example", 100)
        >>> entity.name.text
        'Example'
    """
    # Create domain objects with validation
    entity_name = EntityName(text=name)
    entity_value = EntityValue(amount=value)

    # Create entity
    entity = Entity(name=entity_name, value=entity_value)

    # Persist via repository
    ctx.repository.save(entity)

    return entity


def get_example(
    ctx: ServiceContext,
    entity_id: str,
) -> Entity:
    """Retrieve entity by ID.

    Args:
        ctx: Service context with dependencies
        entity_id: Unique entity identifier

    Returns:
        Entity if found

    Raises:
        EntityNotFoundError: If entity doesn't exist

    Example:
        >>> ctx = get_context()
        >>> entity = get_example(ctx, "some-uuid")
    """
    entity = ctx.repository.get(entity_id)

    if entity is None:
        raise EntityNotFoundError(entity_id)

    return entity


def list_examples(
    ctx: ServiceContext,
) -> list[Entity]:
    """List all entities.

    Args:
        ctx: Service context with dependencies

    Returns:
        List of all entities (empty if none exist)

    Example:
        >>> ctx = get_context()
        >>> entities = list_examples(ctx)
        >>> len(entities)
        5
    """
    return ctx.repository.list_all()
{% else -%}
"""Service functions - business logic as pure functions.

Define your service functions here. Each function should:
1. Take ServiceContext as first parameter
2. Be a pure function (no hidden state)
3. Use dependencies from context
4. Return values or raise exceptions

Example:
    from {{ package_name }}.services.context import ServiceContext
    from {{ package_name }}.domain.entity import User

    def create_user(
        ctx: ServiceContext,
        email: str,
        name: str,
    ) -> User:
        \"\"\"Create and persist a new user.\"\"\"
        user = User(email=email, name=name)
        ctx.user_repository.save(user)
        return user
"""
{% endif -%}
